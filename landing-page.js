var imagePaths = [
      {
      preview: "../Images/Content/71/Preview.jpg",
      hover: ["../Images/Content/71/1.jpg", "../Images/Content/71/Preview.jpg"]
    },
      {
      preview: "../Images/Content/72/Preview.jpg",
      hover: ["../Images/Content/72/1.jpg", "../Images/Content/72/Preview.jpg"],
      zIndex: "200"
    },
      {
      preview: "../Images/Content/70/Preview.jpg",
      hover: ["../Images/Content/70/1.jpg", "../Images/Content/70/Preview.jpg"]
    },
      {
      preview: "../Images/Content/69/Preview.jpg",
      hover: ["../Images/Content/69/1.jpg", "../Images/Content/69/Preview.jpg"]
    },
      {
      preview: "../Images/Content/68/Preview.jpg",
      hover: ["../Images/Content/68/1.jpg", "../Images/Content/68/Preview.jpg"]
    },
      {
      preview: "../Images/Content/67/Preview.jpg",
      hover: ["../Images/Content/67/1.jpg", "../Images/Content/67/2.jpg", "../Images/Content/67/3.jpg", "../Images/Content/67/Preview.jpg"],
    },
      {
      preview: "../Images/Content/66/Preview.jpg",
      hover: []
    },
      {
      preview: "../Images/Content/65/Preview.jpg",
      hover: ["../Images/Content/65/1.jpg", "../Images/Content/65/Preview.jpg"]
    },
      {
      preview: "../Images/Content/64/Preview.jpg",
      hover: ["../Images/Content/64/1.jpg", "../Images/Content/64/Preview.jpg"]
    },
      {
      preview: "../Images/Content/63/Preview.jpg",
      hover: ["../Images/Content/63/1.jpg", "../Images/Content/63/Preview.jpg"]
    },
      {
      preview: "../Images/Content/62/Preview.jpg",
      hover: ["../Images/Content/62/1.jpg", "../Images/Content/62/Preview.jpg"]
    },
    {
      preview: "../Images/Content/61/Preview.jpg",
      hover: ["../Images/Content/61/1.jpg", "../Images/Content/61/2.jpg", "../Images/Content/61/Preview.jpg"]
    },
    {
      preview: "../Images/Content/60/Preview.jpg",
      hover: ["../Images/Content/60/1.jpg", "../Images/Content/60/Preview.jpg"]
    },
    {
      preview: "../Images/Content/59/Preview.jpg",
      hover: ["../Images/Content/59/1.jpg", "../Images/Content/59/Preview.jpg"]
    },
    {
      preview: "../Images/Content/58/Preview.jpg",
      hover: ["../Images/Content/58/1.jpg", "../Images/Content/58/Preview.jpg"]
    },
    {
      preview: "../Images/Content/57/Preview.jpg",
      hover: ["../Images/Content/57/1.jpg", "../Images/Content/57/Preview.jpg"]
    },
    {
      preview: "../Images/Content/56/Preview.jpg",
      hover: ["../Images/Content/56/1.jpg", "../Images/Content/56/Preview.jpg"]
    },
    {
      preview: "../Images/Content/55/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/54/Preview.jpg",
      hover: ["../Images/Content/54/1.jpg", "../Images/Content/54/Preview.jpg"]
    },
    {
      preview: "../Images/Content/53/Preview.jpg",
      hover: ["../Images/Content/53/1.jpg", "../Images/Content/53/Preview.jpg"]
    },
    {
      preview: "../Images/Content/52/Preview.jpg",
      hover: ["../Images/Content/52/1.jpg", "../Images/Content/52/Preview.jpg"],
      zIndex: "200"
    },
    {
      preview: "../Images/Content/51/Preview.jpg",
      hover: ["../Images/Content/51/1.jpg", "../Images/Content/51/Preview.jpg"]
    },
    {
      preview: "../Images/Content/50/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/49/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/48/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/47/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/46/Preview.jpg",
      hover: ["../Images/Content/46/1.jpg", "../Images/Content/46/Preview.jpg"]
    },
    {
      preview: "../Images/Content/45/Preview.jpg",
      hover: ["../Images/Content/45/1.jpg", "../Images/Content/45/Preview.jpg"]
    },
    {
      preview: "../Images/Content/44/Preview.jpg",
      hover: ["../Images/Content/44/1.jpg", "../Images/Content/44/Preview.jpg"]
    },
    {
      preview: "../Images/Content/43/Preview.jpg",
      hover: ["../Images/Content/43/1.jpg", "../Images/Content/43/Preview.jpg"]
    },
    {
      preview: "../Images/Content/42/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/41/Preview.jpg",
      hover: ["../Images/Content/41/1.jpg", "../Images/Content/41/Preview.jpg"]
    },
    {
      preview: "../Images/Content/40/Preview.jpg",
      hover: ["../Images/Content/40/1.jpg", "../Images/Content/40/Preview.jpg"]
    },
    {
      preview: "../Images/Content/39/Preview.jpg",
      hover: ["../Images/Content/39/1.jpg", "../Images/Content/39/Preview.jpg"]
    },
    {
      preview: "../Images/Content/38/Preview.jpg",
      hover: ["../Images/Content/38/1.jpg", "../Images/Content/38/Preview.jpg"]
    },
    {
      preview: "../Images/Content/37/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/36/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/35/Preview.jpg",
      hover: ["../Images/Content/35/1.jpg", "../Images/Content/35/Preview.jpg"], 
      zIndex: "200"
    },
    {
      preview: "../Images/Content/34/Preview.jpg",
      hover: []
    },
    {
      preview: "../Images/Content/33/Preview.jpg",
      hover: ["../Images/Content/33/1.jpg", "../Images/Content/33/Preview.jpg"]
    },
    {
      preview: "../Images/Content/32/Preview.jpg",
      hover: ["../Images/Content/32/1.jpg", "../Images/Content/32/Preview.jpg"]
    },
    {
      preview: "../Images/Content/31/Preview.jpg",
      hover: ["../Images/Content/31/1.jpg", "../Images/Content/31/2.jpg", "../Images/Content/31/Preview.jpg"]
    },
    {
      preview: "../Images/Content/30/Preview.jpg",
      hover: ["../Images/Content/30/1.jpg", "../Images/Content/30/2.jpg", "../Images/Content/30/Preview.jpg"]
    },
    {
      preview: "../Images/Content/29/Preview.jpg",
      hover: ["../Images/Content/29/1.jpg", "../Images/Content/29/Preview.jpg"]
    },
    {
      preview: "../Images/Content/28/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/27/Preview.jpg",
      hover: ["../Images/Content/27/1.jpg", "../Images/Content/27/2.jpg", "../Images/Content/27/Preview.jpg"]
    },
    {
      preview: "../Images/Content/26/Preview.jpg",
      hover: ["../Images/Content/26/1.jpg", "../Images/Content/26/2.jpg", "../Images/Content/26/Preview.jpg"],
      zIndex: "200"
    },
    {
      preview: "../Images/Content/25/Preview.jpg",
      hover: ["../Images/Content/25/1.jpg", "../Images/Content/25/Preview.jpg"],
    },
    {
      preview: "../Images/Content/24/Preview.jpg",
      hover: ["../Images/Content/24/1.jpg", "../Images/Content/24/Preview.jpg"],
      zIndex: "200"
    },
    {
      preview: "../Images/Content/23/Preview.jpg",
      hover: ["../Images/Content/23/1.jpg", "../Images/Content/23/Preview.jpg"],
    },
    {
      preview: "../Images/Content/22/Preview.jpg",
      hover: ["../Images/Content/22/1.jpg", "../Images/Content/22/2.jpg", "../Images/Content/22/Preview.jpg"],
    },
    {
      preview: "../Images/Content/21/Preview.jpg",
      hover: ["../Images/Content/21/1.jpg", "../Images/Content/21/Preview.jpg"],
    },
    {
      preview: "../Images/Content/20/Preview.jpg",
      hover: ["../Images/Content/20/1.jpg", "../Images/Content/20/Preview.jpg"],
    },
    {
      preview: "../Images/Content/19/Preview.jpg",
      hover: ["../Images/Content/19/1.jpg", "../Images/Content/19/Preview.jpg"],
    },
    {
      preview: "../Images/Content/18/Preview.jpg",
      hover: ["../Images/Content/18/1.jpg", "../Images/Content/18/2.jpg", "../Images/Content/18/Preview.jpg"],
    },
    {
      preview: "../Images/Content/17/Preview.jpg",
      hover: ["../Images/Content/17/1.jpg", "../Images/Content/17/Preview.jpg"],
    },
    {
      preview: "../Images/Content/16/Preview.jpg",
      hover: ["../Images/Content/16/1.jpg", "../Images/Content/16/2.jpg", "../Images/Content/16/Preview.jpg"],
    },
    {
      preview: "../Images/Content/15/Preview.jpg",
      hover: ["../Images/Content/15/1.jpg", "../Images/Content/15/2.jpg", "../Images/Content/15/3.jpg", "../Images/Content/15/Preview.jpg"],
    },
    {
      preview: "../Images/Content/14/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/13/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/12/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/11/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/10/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/9/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/8/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/7/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/6/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/5/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/4/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/3/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/2/Preview.jpg",
      hover: [],
    },
    {
      preview: "../Images/Content/1/Preview.jpg",
      hover: [],
    }
  ];
  
  
  var imgContainer = document.getElementById("feed");
  
  for (var i = 0; i < imagePaths.length; i++) {
      var imgDiv = document.createElement("div");
      imgDiv.className = "article";
    
      var img = document.createElement("img");
      img.src = imagePaths[i].preview;
      img.className = "works";
      imgDiv.id = "id-" + i;
  
      if (imagePaths[i].hasOwnProperty("zIndex")) {
        imgDiv.style.zIndex = imagePaths[i].zIndex;
      }
    
      imgDiv.appendChild(img);
      imgContainer.appendChild(imgDiv);
    }
  
    var emptyDiv = document.createElement("div");
    emptyDiv.className = "empty";
    imgContainer.appendChild(emptyDiv)
  
  
    var displace = function() {
      for (var i = 0; i < imagePaths.length; i++) {
          var image = document.getElementById("id-" + i);
  
          var randomTranslateX = Math.floor(Math.random() * 20) - 10;
          var randomTranslateY = Math.floor(Math.random() * 60) - 30;

          if (image) {
            image.style.transform = `translate(${randomTranslateX}%, ${randomTranslateY}%)`;
          }
      }
  };

  var mobileDisplace = function() {
    for (var i = 0; i < imagePaths.length; i++) {
        var image = document.getElementById("id-" + i);

        var mobileRandomTranslateX = Math.floor(Math.random() * 15) - 7;
        var mobileRandomTranslateY = Math.floor(Math.random() * 10) - 5;

        if (image) {
            image.style.transform = `translate(${mobileRandomTranslateX}%, ${mobileRandomTranslateY}%)`;
        }
    }
};
  
  document.addEventListener("DOMContentLoaded", function () {
    if (window.innerWidth <= 850) {
      mobileDisplace();
    } else {
      displace();
    }
    
    window.addEventListener("resize", function() {
      if (window.innerWidth <= 850) {
        mobileDisplace();
      } else {
        displace();
      }
      })
  });
  
  var imageElements = document.querySelectorAll("#feed img");
  
  function changeImageOnHover(index) {
    return function () {
      var image = imageElements[index];
  
      var hoverImages = imagePaths[index].hover;
      
  
      if (hoverImages.length > 0) {
        var currentImageIndex = 0;
  
        function cycleImages() {
          image.src = hoverImages[currentImageIndex];
          currentImageIndex = (currentImageIndex + 1) % hoverImages.length;
        }
  
        var interval = setInterval(cycleImages, 1500);
  
        image.addEventListener("mouseout", function () {
          clearInterval(interval);
          image.src = imagePaths[index].preview;
        });
      }
    };
  }

  var imageElements = document.querySelectorAll("#feed img");

function changeImageOnHover(index) {
  return function () {
    var image = imageElements[index];

    var hoverImages = imagePaths[index].hover;
    

    if (hoverImages.length > 0) {
      var currentImageIndex = 0;

      function cycleImages() {
        image.src = hoverImages[currentImageIndex];
        currentImageIndex = (currentImageIndex + 1) % hoverImages.length;
      }

      var interval = setInterval(cycleImages, 750);

      image.addEventListener("mouseout", function () {
        clearInterval(interval);
        image.src = imagePaths[index].preview;
      });
    }
  };
}

for (var i = 0; i < imageElements.length; i++) {
  imageElements[i].addEventListener("mouseover", changeImageOnHover(i));
}

function quickViewImage(index) {
    var image = imageElements[index];
    var hoverImages = imagePaths[index].hover;
  
    if (hoverImages.length > 0) {
      var quickViewOverlay = document.createElement("div");
      quickViewOverlay.className = "quick-view-overlay";
  
      var quickViewImage = document.createElement("img");
      quickViewImage.src = hoverImages[0];
      quickViewImage.className = "quick-view-image";
  
      quickViewOverlay.appendChild(quickViewImage);
      document.body.appendChild(quickViewOverlay);
  
      var currentImageIndex = 1;
  
      function cycleQuickViewImages() {
        quickViewImage.src = hoverImages[currentImageIndex];
        currentImageIndex = (currentImageIndex + 1) % hoverImages.length;
      }
  
      var interval = setInterval(cycleQuickViewImages, 750);
  
      quickViewOverlay.addEventListener("click", function () {
        clearInterval(interval);
        document.body.removeChild(quickViewOverlay);
      });
    } else {
  
      var quickViewOverlay = document.createElement("div");
      quickViewOverlay.className = "quick-view-overlay";
  
      var quickViewImage = document.createElement("img");
      quickViewImage.src = imagePaths[index].preview;
      quickViewImage.className = "quick-view-image";
  
      quickViewOverlay.appendChild(quickViewImage);
      document.body.appendChild(quickViewOverlay);
  
      quickViewOverlay.addEventListener("click", function () {
        document.body.removeChild(quickViewOverlay);
      });
    }
  }
  
  imgContainer.addEventListener("click", function (event) {
    var clickedElement = event.target;
    if (clickedElement.tagName === "IMG") {
      var index = Array.from(imageElements).indexOf(clickedElement);
      quickViewImage(index);
    }
  });

var logo = document.getElementById("logo");

var logoUrls = [
  "../Images/Logos/ErikMerisalu-Website-Logo-1.png",
  "../Images/Logos/ErikMerisalu-Website-Logo-2.png"
]

var currentLogoIndex = 0;

function changeLogo() {
  logo.src = logoUrls[currentLogoIndex];
  currentLogoIndex = (currentLogoIndex + 1) % logoUrls.length;
}

changeLogo();
setInterval(changeLogo, 1000);

document.addEventListener("DOMContentLoaded", function() {
    var worksButton = document.getElementById("works")
    var feed = document.getElementById("feed");
    var worksOverlay = document.getElementById("worksOverlay");

    worksButton.addEventListener("click", function() {
        worksOverlay.classList.toggle("active");
        feed.classList.toggle("active");
    });
});

document.addEventListener("DOMContentLoaded", function() {
    var contactButton = document.getElementById("contactButton");

    contactButton.addEventListener("click", function() {
        var quickViewOverlay = document.createElement("div");
        quickViewOverlay.className = "quick-view-overlay";
    
        var quickViewContactContainer = document.createElement("div");
        quickViewContactContainer.className = "quick-view-contact-container"
    
        var email = document.createElement("a");
        email.href = "mailto:erikmerisalu@me.com";
        email.className = "quick-view-contact-buttons";
        email.textContent = "Email";
        var hoverImageEmail = document.createElement("img");
        hoverImageEmail.src = "../Images/Hover-Images/4.png";
        hoverImageEmail.className = "hover-image";

        var instagram = document.createElement("a");
        instagram.href = "https://www.instagram.com/erjjek/";
        instagram.className = "quick-view-contact-buttons";
        instagram.textContent = "Instagram";
        var hoverImageIG = document.createElement("img");
        hoverImageIG.src = "../Images/Hover-Images/2.png";
        hoverImageIG.className = "hover-image";
    
        email.appendChild(hoverImageEmail);
        instagram.appendChild(hoverImageIG);
        quickViewContactContainer.appendChild(instagram);
        quickViewContactContainer.appendChild(email);
        quickViewOverlay.appendChild(quickViewContactContainer);
        document.body.appendChild(quickViewOverlay);

        quickViewOverlay.addEventListener("click", function() {
            document.body.removeChild(quickViewOverlay)
        })
    })
})

var intro = document.getElementById("intro");

document.addEventListener("DOMContentLoaded", function() {
  intro.style.opacity = "1";

  window.addEventListener("load", function() {
    intro.style.opacity = "0";
  })
})  

var video = document.getElementById('video');

Object.defineProperty(HTMLMediaElement.prototype, 'playing', {
  get: function () {
    return !!(this.currentTime > 0 && !this.paused && !this.ended && this.readyState > 2);
  }
});

document.body.addEventListener("click", function () {
  const videoElement = document.getElementById('video');
  if (videoElement.playing) {
  } else {
    videoElement.play();
  }
});



var works = document.querySelectorAll(".works");
var articles = document.querySelectorAll(".article");

    function isInViewport(element) {
      const rect = element.getBoundingClientRect();
      return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
      );
    }

    function resetStyles() {
      works.forEach(function (image) {
        image.classList.remove('active-works');
      });
      articles.forEach(function (div) {
        div.style.zIndex = "1";
      });
    }

    function handleViewportStyles() {
      if (window.innerWidth <= 850) {
        resetStyles();
        works.forEach(function (image) {
          if (isInViewport(image)) {
            image.classList.add('active-works');
            var articleIndex = Array.from(works).indexOf(image);
            if (articleIndex >= 0) {
              articles[articleIndex].style.zIndex = "999";
            }
          }
        });
      } else {
        resetStyles();
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      var imgContainer = document.getElementById("feed");

      imgContainer.addEventListener("scroll", function () {
        handleViewportStyles();
      });

      window.addEventListener("resize", function () {
        if (this.window.innerWidth <= 850) {
          handleViewportStyles();
        }
      });
    });


    const windowScrollY = window.scrollY;

    // Add an event listener to the window's scroll event
    window.addEventListener('scroll', () => {
    // Calculate the scroll position of the target div based on window's scroll
    const targetScrollY = windowScrollY + window.scrollY;

    // Set the scroll position of the target div
    imgContainer.scrollTop = windowScrollY;
    });
